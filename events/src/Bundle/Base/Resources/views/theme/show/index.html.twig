{% extends 'base.html.twig' %}

{% block body %} 
   <div class="container nobc"> 
      {% if edition.event.divisions|length > 0 %}      
         <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
               {% for division in edition.event.divisions %}               
                  <a class="nav-item nav-link {{ loop.index == 1 ? 'active' : '' }}" id="nav-home-tab" data-toggle="tab"
                     href="#navdivision-{{ division.id }}" role="tab" aria-controls="nav-home" 
                     aria-selected="{{ loop.index == 1 ? 'true' : 'false' }}">
                     {{ division.initials }}
                  </a>
               {% endfor %}
            </div>
         </nav>

        <div class="tab-content" id="nav-tabContent">
            {% for division in edition.event.divisions %}
                <div class="tab-pane fade {{ loop.index == 1 ? 'active show' : '' }}" id="navdivision-{{ division.id }}" role="tabpanel"
                     aria-labelledby="nav-home-tab">
                    <div>
                        <h2>{{ division.name }}</h2>

                        {% if division.getDivisionCoordinators({'edition': edition.id})|length > 0 %}
                            <h3 class="mb-2">{{ 'EVENT_DETAILS_LABEL_COORDINATOR'|trans }}</h3>
                            {% for dc in division.getDivisionCoordinators({'edition': edition.id}) %}
                                <p class="m-0 ml-3">{{ dc.coordinator.name ~ ' ' ~ dc.coordinator.institutionsPrograms }}</p>
                            {% endfor %}
                        {% endif %}

                        {% if division.getUserCommittees({'edition': edition.id})|length > 0 %}
                            <h3 class="mt-3 mb-2">{{ 'EVENT_DETAILS_LABEL_COMMITTE'|trans }}</h3>
                            {% for uc in division.getUserCommittees({'edition': edition.id}) %}
                                <p class="m-0 ml-3">{{ uc.user.name }} {{ uc.user.institutionsPrograms }}</p>
                            {% endfor %}
                        {% endif %}
                    </div>

                    {# {% if subsection.committe|length > 0 %} #}
                    {% for theme in division.themes %}
                        <div class="card mt-3">
                            <div class="card-header" id="navtheme--{{ theme.id }}" data-toggle="collapse"
                                 data-target="#navtheme-{{ theme.id }}" data-toggle="tooltip">
                                {{ 'EVENT_DETAILS_LABEL_THEME'|trans }} {{ theme.position }}
                                - {{ theme.details.title }}
                            </div>
                            <div id="navtheme-{{ theme.id }}" class="collapse"
                                 aria-labelledby="header-{{ loop.index }}">
                                <div class="card-body">
                                    <h4>{{ 'EVENT_DETAILS_LABEL_LEADERS'|trans }}</h4>
                                    {% for leader in theme.userThemesResearchers %}
                                        <p class="ml-3"><b>{{ leader.researcher.name }}</b>: {{ leader.researcher.institutionsPrograms }}</p>
                                    {% endfor %}
                                    {{ theme.details.description|raw }}
                                    <h4>{{ 'EVENT_DETAILS_LABEL_KEYWORDS'|trans }}</h4>
                                    <div class="ml-3">{{ theme.details.keywords|join('; ') }}</div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    {# {% endif %} #}
                </div>
            {% endfor %}
        </div>         
      {% endif %}    
   </div>   
{% endblock %}