{% import _self as sortMacro %}

{% extends 'base.html.twig' %}
{% block body %}
    <div class="container">
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" href="{{ path('manager_theme_submission_config') }}" role="tab">
                    {{ 'Configurações de <br/>Submissão de Temas'|trans|raw }}
                </a>
            </div>
        </nav>

        <div class="tab-content">
            <div class="tab-pane fade show active" role="tabpanel">
                <nav>
                    <div class="nav nav-tabs" role="tablist">
                        <a id="manager-back-route" class="nav-item nav-link" href="{{ path('manager_theme_submission_config') }}" role="tab">
                            {{ 'Lista de<br/>Configurações'|trans|raw }}
                        </a>
                        <a class="nav-item nav-link active" href="#dados" role="tab">
                            {{ 'Dados da<br/>Configuração'|trans|raw }}
                        </a>
                    </div>
                </nav>
                <div class="tab-content">
                    <div class="tab-pane fade show active" role="tabpanel">

                        {% if entity.id != '' %}
                            <h1>{{ 'Editar Configuração'|trans }}: {{ entity.year }}</h1>
                        {% else %}
                            <h1>{{ 'Nova Configuração'|trans }}</h1>
                        {% endif %}

                        {% for message in app.flashes('success') %}
                            <div class="alert alert-success">
                                {{ message |trans }}
                            </div>
                        {% endfor %}

                        {% for message in app.flashes('error') %}
                            <div class="alert alert-danger">
                                {{ message |trans }}
                            </div>
                        {% endfor %}

                        {{ form_start(form, {'attr': {'id': 'form-theme-submission-config', 'class': 'form form-theme-submission-config', 'action':path(app.request.get('_route'), {id: entity.id})}}) }}

                        <div class="row">
                            <div class="col-12 form-group">
                                <label for="{{ form.year.vars.id }}">{{ 'Ano'|trans }}</label>
                                {{ form_widget(form.year, {'attr': {'class': 'form-control'}}) }}
                                {% if form.year.vars['errors']|length > 0 %}
                                    <div class="form-error invalid-input">
                                        {{ form.year.vars['errors'][0].message }}
                                    </div>
                                {% endif %}
                            </div>
                            <div class="col-12 form-group">
                                <label>{{ 'Definições'|trans }}</label>
                                <div class="radiocheck center">
                                    <div class="form-check form-check-inline mr-4">
                                        {{ form_widget(form.isCurrent, {'attr': {'class': 'form-check-input'}}) }}
                                        <label class="form-check-label" for="{{ form.isCurrent.vars.id }}">{{ 'Usar como atual'|trans }}</label>
                                        {% if form.isCurrent.vars['errors']|length > 0 %}
                                            <div class="form-error invalid-input">
                                                {{ form.isCurrent.vars['errors'][0].message }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="form-check form-check-inline">
                                        {{ form_widget(form.isAvailable, {'attr': {'class': 'form-check-input'}}) }}
                                        <label class="form-check-label" for="{{ form.isAvailable.vars.id }}">{{ 'Habilitar Submissões'|trans }}</label>
                                        {% if form.isAvailable.vars['errors']|length > 0 %}
                                            <div class="form-error invalid-input">
                                                {{ form.isAvailable.vars['errors'][0].message }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="form-check form-check-inline">
                                        {{ form_widget(form.isEvaluationAvailable, {'attr': {'class': 'form-check-input'}}) }}
                                        <label class="form-check-label" for="{{ form.isEvaluationAvailable.vars.id }}">{{ 'Habilitar Avaliações'|trans }}</label>
                                        {% if form.isEvaluationAvailable.vars['errors']|length > 0 %}
                                            <div class="form-error invalid-input">
                                                {{ form.isEvaluationAvailable.vars['errors'][0].message }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="form-check form-check-inline">
                                        {{ form_widget(form.isResultAvailable, {'attr': {'class': 'form-check-input'}}) }}
                                        <label class="form-check-label" for="{{ form.isResultAvailable.vars.id }}">{{ 'Liberar Resultado'|trans }}</label>
                                        {% if form.isResultAvailable.vars['errors']|length > 0 %}
                                            <div class="form-error invalid-input">
                                                {{ form.isResultAvailable.vars['errors'][0].message }}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-md-6">
                                <a class="btn btn-lg btn-outline-primary" href="{{ path('manager_theme_submission_config') }}">{{ 'CANCEL'|trans }}</a>
                            </div>
                            <div class="col-md-6">
                                <button type="submit" class="btn btn-lg btn-block btn-primary">
                                    {{ 'SAVE'|trans }} <i id="btnLoad"></i>
                                </button>
                            </div>
                        </div>

                        {{ form_end(form) }}

                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('themeSubmissionConfigForm') }}
    {{ parent() }}
{% endblock %}
