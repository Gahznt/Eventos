{# src/layouts/base.html.twig #}
{% extends 'base.html.twig' %}
{% block body %}

    {% if is_granted('ROLE_ADMIN') and isOwnerUser == false %}
        {% set buttons = [
            {'label': 'USER_BTN_REMOVE'|trans , 'class': 'btn-outline-danger delUser delete', 'href': '#'}
        ] %}
    {% else %}
        {% set buttons = [] %}
    {% endif %}

    <div class="container">
        <nav>
            <div class="nav nav-tabs" id="user-nav-tab" role="tablist">
                <a class="nav-item nav-link tab-4 active" id="user-nav-1" data-toggle="tab" href="#user-tab-1"
                   role="tab">
                    {{ 'USER_STEP1'|trans|raw }}
                </a>
                <a href="{{ path('user_edit', {'id' : user.id}) }}" class="nav-item nav-link tab-4" id="user-nav-4">
                    {{ 'USER_EDIT_DATA'|trans|raw }}
                </a>
                <a href="{{ path('user_password_change', {'id' : user.id}) }}" class="nav-item nav-link tab-5" id="user-nav-5">
                    {{ 'USER_PASSWORD_CHANGE'|trans|raw }}
                </a>
                {% if is_granted('ROLE_ADMIN') %}
                    <a class="nav-item nav-link tab-4" id="user-nav-2" data-toggle="tab" href="#user-tab-2" role="tab">
                        {{ 'USER_STEP2'|trans|raw }}
                    </a>
                    <a class="nav-item nav-link tab-4" id="user-nav-3" data-toggle="tab" href="#user-tab-3" role="tab">
                        {{ 'USER_STEP3'|trans|raw }}
                    </a>
                {% endif %}
            </div>
        </nav>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="user-tab-1" role="tabpanel">
                {% include 'users/partials/header.html.twig' with {
                    title: 'USER_STEP1_HEAD'|trans,
                    buttons: buttons
                } %}
                {% include 'users/tabs/userData.html.twig' %}
            </div>
            <div class="tab-pane fade" id="user-tab-2" role="tabpanel">
                {% include 'users/partials/header.html.twig' with {
                    title: 'USER_STEP2_HEAD'|trans,
                    buttons: buttons
                } %}
                {% include '@Base/users/tabs/associations/show.html.twig' %}
            </div>
            <div class="tab-pane fade" id="user-tab-3" role="tabpanel">
                {% include 'users/partials/header.html.twig' with {
                    title: 'USER_STEP3_HEAD'|trans,
                } %}
                {% include '@Base/users/tabs/associations/index.html.twig' %}
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('user') }}
{% endblock %}
