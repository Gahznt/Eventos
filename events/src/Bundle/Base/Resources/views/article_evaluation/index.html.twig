{# src/layouts/base.html.twig #}
{% extends 'base.html.twig' %}
{% block body %}

  <div class="container">
    <div class="fieldset">
      <h2>{{ 'USERLIST_FILTERS'|trans }}</h2>
      <div class="form mb-3">
          {{ form_start(form) }}
        <div class="col-2 col-md-2 form-group">
          <label for="division">{{ 'Division'|trans }}</label>
            {{ form_widget(form.division, {'attr': {'id':'division', 'class': 'filter form-control'}}) }}
        </div>

        <div class="col-2 col-md-2 form-group">
          <label for="userThemes">{{ 'Theme'|trans }}</label>
            {{ form_widget(form.userThemes, {'attr': {'id':'userThemes', 'class': 'filter form-control'}}) }}
        </div>

        <div class="col-8 col-md-8 form-group">
          <label for="search">{{ 'Search'|trans }}</label>
          <a id="userFormSearchBtn" class="inputSearchBtn"><i class="fas fa-search"></i></a>
            {{ form_widget(form.search, {'attr': {'id':'search', 'class': 'filter form-control'}}) }}
        </div>
          {{ form_end(form) }}
      </div>

      <div class="tabela table-responsive">
        <h2>{{ 'USERLIST_FOUND'|trans }}</h2>
          {% if articles is empty %}
            <div class="alert alert-warning" role="alert">
              Nenhum resultado encontrado.
            </div>
          {% else %}
            <table class="table table-striped table-sm">
              <thead>
              <tr>
                <th class="sort desc">Id</th>
                <th class="sort">{{ 'Name'|trans }}</th>
                <th class="sort">{{ 'Division'|trans }}</th>
                <th class="sort">{{ 'Theme'|trans }}</th>
                <th class="text-right">{{ 'Actions'|trans }}</th>
              </tr>
              </thead>
              <tbody>
              {% for article in articles %}
                <tr>
                  <td>{{ article.userArticles.id }}</td>
                  <td>{{ article.userArticles.title }}</td>
                  <td>{{ article.userArticles.divisionId.name }}</td>
                  <td>{{ article.userArticles.userThemes.details.title}}</td>
                  <td class="text-right">
                    {% if article.valid == 0 %}
                    <a href="{{ path('article_evaluation_show' , {systemEvaluationIndications: article, edition: edition.id}) }}" data-toggle="tooltip"
                       class="hover-success" title="{{ 'ARTICLE_EVALUATION_TOOLTIP_SEARCH'|trans }}">
                      <i class="fas fa-hammer"></i>
                    </a>
                    {% else %}
                      <i class="fas fa-ban"></i>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
            <nav class="d-flex justify-content-between" style="float: right">
                {{ knp_pagination_render(articles) }}
            </nav>
            <small class="text-muted">{{ 'Showing'|trans }} {{ articles|length }} {{ 'of' |trans }} {{ articles.getTotalItemCount }}</small>
          {% endif %}

          {% for message in app.flashes('success') %}
            <br />
            <br />
            <div class="alert alert-success">
                {{ message }}
            </div>
          {% endfor %}
      </div>
    </div>

  </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('articleEvaluation') }}
{% endblock %}
